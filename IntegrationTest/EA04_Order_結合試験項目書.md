# EA04_Order_結合試験項目書

## EA0401-UC01-T01_受注検索（検索結果1件以上）

1. 既に受注情報が存在する状態となるよう準備する
1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し"検索"ボタンを押下
1. 検索結果が表示される

## EA0401-UC01-T02_受注検索（検索結果0件）

1. 既に受注情報が存在する状態となるよう準備する
1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、登録されている受注にヒットしない受注のメールアドレスを入力し"検索"ボタンを押下
1. "検索条件に合致するデータが見つかりませんでした"メッセージが表示される。

## EA0401-UC01-T03_受注検索（検索エラー）

1. 既に受注情報が存在する状態となるよう準備する
1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、バリデーションエラーが発生するデータを入力し"検索"ボタンを押下
1. エラーメッセージが表示される。

## EA0401-UC02-T01_受注CSVダウンロード

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し"検索"ボタンを押下
1. 検索結果が表示される
1. "CSVダウンロード" ボタンを押下する
1. "受注CSVダウンロード" リンクを押下する
1. CSVがダウンロードされる（検索条件にヒットしたデータのみダウンロードされること）

## EA0401-UC02-T02_受注情報のCSV出力 項目変更設定

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. "CSV出力項目設定" ボタンを押下する
1. "受注CSV出力項目設定" リンクを押下する
1. "設定＞店舗設定＞CSV出力項目設定"画面へ遷移する。（その後のテストは、システム設定画面のテストにて実施）

## EA0401-UC03-T01_配送CSVダウンロード

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下・検索結果が表示される
1. "CSVダウンロード" ボタンを押下する
1. "配送CSVダウンロード" リンクを押下する
1. CSVがダウンロードされる（検索条件にヒットしたデータの、配送情報のみダウンロードされること）

## EA0401-UC03-T02_配送情報のCSV出力 項目変更設定

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. "CSV出力項目設定" ボタンを押下する
1. "配送CSV出力項目設定" リンクを押下する
1. "設定＞店舗設定＞CSV出力項目設定"画面へ遷移する。（その後のテストは、システム設定画面のテストにて実施）

## EA0401-UC05-T01_受注編集（正常系）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧の注文者のリンクを押下する
1. 受注情報編集画面へ遷移する。
1. 受注情報フォームを変更する
1. "登録"ボタンを押下する
1. 登録完了メッセージが表示される。

## EA0401-UC05-T02_受注編集（異常系）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧の注文者のリンクを押下する
1. 受注情報編集画面へ遷移する。
1. 受注情報フォームを変更する（必須項目を未入力にする）
1. "登録"ボタンを押下する
1. エラーメッセージが表示される。

## EA0401-UC05-T03_受注編集（明細削除）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧の注文者のリンクを押下する
1. 受注情報編集画面へ遷移する。
1. 明細を削除する
1. "登録"ボタンを押下する
1. 登録完了メッセージが表示される。

## EA0401-UC06-T01_受注編集（ステータス変更）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧の注文者のリンクを押下する
1. 受注情報編集画面へ遷移する。
1. 受注ステータスを変更する
1. "登録"ボタンを押下する
1. 登録完了メッセージが表示される。

## EA0401-UC08-T01_受注編集（一覧からステータス変更）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧の"出荷済みにする"ボタンを押下する
1. 表示される確認アラートで、"出荷お知らせメールを同時に送る"にチェックを入れ"実行"を押下する
1. 出荷状況に日付が表示され、対応状況が発送済みとなることを確認する

## EA0402-UC01-T01_メール通知

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧の注文者のリンクを押下する
1. 受注情報編集画面へ遷移する。
1. "メールを作成"ボタンを押下する
1. メール通知（入力ページ）画面へ遷移する。
1. テンプレート選択し、件名/ヘッダー/フッターを入力し"送信内容を確認"ボタンを押下する
1. メール通知（確認ページ）へ遷移する。
1. 前画面で入力されたタイトル、本文（ヘッダー+請求金額+商品明細+注文者情報+配送情報）が表示されていることを確認する
1. "送信"ボタンを押下する。
1. メール配信完了メッセージが表示され、対象のアドレスにメールが送信される。

## EA0402-UC02-T01_一括メール通知（正常系）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧左側のチェックボックスにチェックを入れる。
1. "メールする"ボタンを押下する
1. 確認用のモーダルが表示される
1. "送信"ボタンを押下する。
1. メール配信完了メッセージが表示され、対象のアドレスにメールが送信される。

## EA0402-UC02-T01_一括メール通知（キャンセル）

1. 受注管理 → 受注一覧
1. 検索条件入力フォームに、購入者名を入力し "検索" ボタンを押下
1. 検索結果が表示される
1. 検索結果一覧左側のチェックボックスにチェックを入れる。
1. "メールする"ボタンを押下する
1. 確認用のモーダルが表示される
1. 「キャンセル」ボタンを押下する
1. 検索結果一覧画面へ遷移する
1. 前回検索した検索結果が表示される

## EA0405-UC01-T01_受注登録（正常系）

1. 受注管理 → 受注登録
1. 受注情報フォームを変更する
1. "登録"ボタンを押下する
1. 登録完了メッセージが表示される。

## EA0405-UC01-T02_受注登録（異常系）

1. 受注管理 → 受注登録
1. 受注情報フォームを変更する（必須項目を未入力にする）
1. "登録"ボタンを押下する
1. 未入力の必須項目にエラーメッセージが表示される。

## EA0405-UC02-T01_[複数配送] お届け先をコピー

1. 受注管理 > 受注登録
1. 注文者の「会員から検索・入力」ボタンをクリックし、注文者情報を設定
1. 出荷情報の「注文者情報をコピー」ボタンをクリック
1. 出荷情報に注文者情報の内容が正しくコピーされていることを確認

## EA0405-UC02-T02_[複数配送] 出荷情報の追加

1. 受注管理 > 受注一覧
1. 検索結果一覧の注文者のリンクを押下する
1. 受注情報編集画面へ遷移する。
1. 出荷情報の追加ボタンを押下する
1. 出荷情報の追加ボタンでフォームを増やす
1. 必須項目を入力し、登録を押下する
1. 完了メッセージと、出荷に関するメッセージが表示される

## EA0405-UC04-T01_[複数配送] お届け先を1つ削除すると受注情報が更新される

前提：お届け先が3つ存在する受注を作成しておく

1. 受注管理 > 受注一覧
1. お届け先が3つ存在する受注のリンクを押下する
1. 受注情報編集画面へ遷移する
1. 「お届け先を編集」ボタンをクリック、出荷登録画面へ遷移する
1. お届け先2の商品明細を削除する
1. お届け先2の出荷情報を削除する
1. 「登録」ボタンをクリックする
1. 受注情報へ戻り、お届け先2の削除分がお支払合計、商品、数量に反映されていることを確認する

## EA0405-UC06-T01_ー括受注のステータス変更

1. 受注管理 > 受注一覧
1. ステータス「新規受付」の受注を検索する。
1. チェックボックスで全件選択をする。
1. 受注ステータスを「発送済み」に変更する。
1. ステータス「発送済み」の受注を検索して、「新規受付」だった受注が「発送済み」になっていることを確認する。

## EA0405-UC06-T02_納品書の出力

1. 受注管理 > 受注一覧
1. 「納品書出力」ボタンをクリックする.
1. 納品書出力設定モーダルが表示される
1. "作成"ボタンを押下する
1. 納品書がダウンロードされる
1. "閉じる"ボタンを押下する
1. 納品書出力設定モーダルが閉じる

## EA0405-UC06-T03_納品書の一括出力

1. 受注管理 > 受注一覧
1. ステータス「新規受付」の受注を検索する
1. チェックボックスで全件選択をする
1. 「納品書出力」ボタンをクリックする
1. 納品書出力設定モーダルが表示される
1. "作成"ボタンを押下する
1. 納品書がダウンロードされる
1. "閉じる"ボタンを押下する
1. 納品書出力設定モーダルが閉じる